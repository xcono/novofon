openapi: 3.0.0
info:
    title: Редактирование сотрудника
    version: 1.0.0
    description: Создание сотрудника
paths:
    /update.employees:
        put:
            summary: Редактирование сотрудника
            description: |-
                Создание сотрудника

                **Request Parameters:** 40

                - `extension_voice_mail_enabled` (boolean, required): В случае, если все номера, указанные для этого сотрудника в списке телефонов, заняты, то звонящему абоненту будет предложено оставить голосовое сообщение.

                - `last_name` (string, required): Фамилия сотрудника

                - `calls_available` (boolean, optional): Параметр будет удален в ближайшее время. Используйте вместо него параметры: in_external_allowed_call_directions, in_internal_allowed_call_directions Доступность для звонков

                - `in_external_allowed_call_directions` (array, optional): Какие направления вызовов разрешены сотруднику для входящих внешних звонков in - входящие вызовы out - исходящие вызовы

                - `out_external_allowed_call_directions` (array, optional): Какие направления вызовов разрешены сотруднику для исходящих внешних звонков in - входящие вызовы out - исходящие вызовы

                - `coach` (object, optional): Тренер для сотрудника Зависит от компонента "trainer"

                - `phone_number` (string, required): Номер телефона сотрудника Логика обновления: - телефона уже привязан к этому сотруднику - обновляем параметры - телефона не привязан к этому сотруднику - добавляем его - телефона нет в аккаунте - создаем новый и привязываем к сотруднику

                - `extension` (object, optional): Внутренний номер сотрудника

                - `operator_login` (string, required): Логин сотрудника для входа в приложение «Рабочее место оператора»

                - `status_id` (number, optional): Уникальный идентификатор статуса. Для получения полного списка статусов необходимо использовать метод "get.statuses"

                - `out_internal_allowed_call_directions` (array, optional): Какие направления вызовов разрешены сотруднику для исходящих внутренних звонков in - входящие вызовы out - исходящие вызовы

                - `email` (string, optional): Адрес электронной почты сотрудника

                - `schedule_id` (number, optional): График активности

                - `dial_time` (number, optional): Время дозвона по телефону

                - `operator_position_id` (number, optional): Должность сотрудника в подписи

                - `operator_chat_enabled` (boolean, optional): Разрешено ли участвовать в чатах с посетителями

                - `user_id` (number, optional): Уникальный идентификатор пользователя клиента агента от имени которого делается запрос Является обязательным для агента Для получения списка пользователей клиента необходимо использовать метод "get.customer_users"

                - `in_internal_allowed_call_directions` (array, optional): Какие направления вызовов разрешены сотруднику для входящих внутренних звонков in - входящие вызовы out - исходящие вызовы

                - `phone_id` (number, optional): Уникальный идентификатор телефона сотрудника из "get.employees#phone_id" Указываем в случаи если хотим изменить существующий номер. Если не указываем, то поиск производится по номеру телефона (phone_number):

                - `operator_invite_to_chat_enabled` (boolean, optional): Разрешено ли приглашать в чат

                - `status` (enum, optional): Статус номера.

                - `operator_display_name` (string, optional): Имя оператора в чате

                - `operator_password` (string, required): Пароль сотрудника для входа в приложение «Рабочее место оператора»

                - `operator_offline_message_enabled` (boolean, optional): Разрешено ли обрабатывать заявки

                - `operator_sites` (array, optional): Список уникальных идентификаторов сайтов для которых доступен сотрудник.

                - `extension_queue_enabled` (boolean, required): В случае, если все номера, указанные для этого сотрудника в списке телефонов, заняты, то звонящий абонент встанет в очередь на повторный дозвон до телефонов в списке и будет ждать первый освободившийся номер.

                - `id` (number, required): Уникальный идентификатор сотрудника

                - `first_name` (string, optional): Имя сотрудника

                - `coach_id` (number, optional): Уникальный идентификатор тренера

                - `extension_phone_number` (string, required): Внутренний номер

                - `operator` (object, optional): Оператор рабочего места Зависит от компонента "consultant"

                - `allowed_in_call_types` (array, optional): Параметр будет удален в ближайшее время. Используйте вместо него параметры: in_external_allowed_call_directions, in_internal_allowed_call_directions Какие типы входящих звонков разрешены сотруднику internal - внутренние звонки от сотрудников компании external - внешние звонки от клиентов

                - `coach_always_enabled` (boolean, optional): При активации опции все входящие звонки сотрудника будут дублироваться его тренеру. Значение "true" возможно установить если задан параметр "coach_id".

                - `groups` (array, optional): Список уникальных идентификаторов групп в которых состоит сотрудник

                - `phone_numbers` (array, required): Список телефонов сотрудника Важно понимать, что при создании нового сотрудника номер уже может существовать у другого сотрудника и если номеру переданы новые параметры, то они будут так же обновлены уже существующему номеру.

                - `access_token` (string, required): Ключ сессии аутентификации

                - `patronymic` (string, optional): Отчество сотрудника

                - `allowed_out_call_types` (array, optional): Параметр будет удален в ближайшее время. Используйте вместо него параметры: out_external_allowed_call_directions, out_internal_allowed_call_directions Какие типы исходящих звонков разрешены сотруднику internal - внутренние звонки на сотрудников компании external - звонки за пределы компании

                - `call_recording` (enum, optional): Статус записи разговоров Зависит от компонента "recording"

                - `channels_count` (number, optional): Количество линий на телефоне
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                id:
                                    type: number
                                    description: Request identifier
                                jsonrpc:
                                    type: string
                                    description: JSON-RPC version
                                    example: "2.0"
                                method:
                                    type: string
                                    description: Method name
                                    example: update.employees
                                params:
                                    type: object
                                    properties:
                                        access_token:
                                            type: string
                                            description: Ключ сессии аутентификации
                                            example: example_string
                                        allowed_in_call_types:
                                            type: array
                                            description: 'Параметр будет удален в ближайшее время. Используйте вместо него параметры: in_external_allowed_call_directions, in_internal_allowed_call_directions Какие типы входящих звонков разрешены сотруднику internal - внутренние звонки от сотрудников компании external - внешние звонки от клиентов'
                                        allowed_out_call_types:
                                            type: array
                                            description: 'Параметр будет удален в ближайшее время. Используйте вместо него параметры: out_external_allowed_call_directions, out_internal_allowed_call_directions Какие типы исходящих звонков разрешены сотруднику internal - внутренние звонки на сотрудников компании external - звонки за пределы компании'
                                        call_recording:
                                            type: string
                                            description: Статус записи разговоров Зависит от компонента "recording"
                                        calls_available:
                                            type: boolean
                                            description: 'Параметр будет удален в ближайшее время. Используйте вместо него параметры: in_external_allowed_call_directions, in_internal_allowed_call_directions Доступность для звонков'
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        channels_count:
                                            type: number
                                            description: Количество линий на телефоне
                                            example: 123
                                        coach:
                                            type: object
                                            description: Тренер для сотрудника Зависит от компонента "trainer"
                                        coach_always_enabled:
                                            type: boolean
                                            description: При активации опции все входящие звонки сотрудника будут дублироваться его тренеру. Значение "true" возможно установить если задан параметр "coach_id".
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        coach_id:
                                            type: number
                                            description: Уникальный идентификатор тренера
                                            example: 123
                                        dial_time:
                                            type: number
                                            description: Время дозвона по телефону
                                            example: 123
                                        email:
                                            type: string
                                            description: Адрес электронной почты сотрудника
                                            example: example_string
                                        extension:
                                            type: object
                                            description: Внутренний номер сотрудника
                                        extension_phone_number:
                                            type: string
                                            description: Внутренний номер
                                            example: example_string
                                        extension_queue_enabled:
                                            type: boolean
                                            description: В случае, если все номера, указанные для этого сотрудника в списке телефонов, заняты, то звонящий абонент встанет в очередь на повторный дозвон до телефонов в списке и будет ждать первый освободившийся номер.
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        extension_voice_mail_enabled:
                                            type: boolean
                                            description: В случае, если все номера, указанные для этого сотрудника в списке телефонов, заняты, то звонящему абоненту будет предложено оставить голосовое сообщение.
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        first_name:
                                            type: string
                                            description: Имя сотрудника
                                            example: example_string
                                        groups:
                                            type: array
                                            description: Список уникальных идентификаторов групп в которых состоит сотрудник
                                        id:
                                            type: number
                                            description: Уникальный идентификатор сотрудника
                                            example: 123
                                        in_external_allowed_call_directions:
                                            type: array
                                            description: Какие направления вызовов разрешены сотруднику для входящих внешних звонков in - входящие вызовы out - исходящие вызовы
                                        in_internal_allowed_call_directions:
                                            type: array
                                            description: Какие направления вызовов разрешены сотруднику для входящих внутренних звонков in - входящие вызовы out - исходящие вызовы
                                        last_name:
                                            type: string
                                            description: Фамилия сотрудника
                                            example: example_string
                                        operator:
                                            type: object
                                            description: Оператор рабочего места Зависит от компонента "consultant"
                                        operator_chat_enabled:
                                            type: boolean
                                            description: Разрешено ли участвовать в чатах с посетителями
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        operator_display_name:
                                            type: string
                                            description: Имя оператора в чате
                                            example: example_string
                                        operator_invite_to_chat_enabled:
                                            type: boolean
                                            description: Разрешено ли приглашать в чат
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        operator_login:
                                            type: string
                                            description: Логин сотрудника для входа в приложение «Рабочее место оператора»
                                            example: example_string
                                        operator_offline_message_enabled:
                                            type: boolean
                                            description: Разрешено ли обрабатывать заявки
                                            example: "true"
                                            enum:
                                                - "true"
                                                - "false"
                                        operator_password:
                                            type: string
                                            description: Пароль сотрудника для входа в приложение «Рабочее место оператора»
                                            example: example_string
                                        operator_position_id:
                                            type: number
                                            description: Должность сотрудника в подписи
                                            example: 123
                                        operator_sites:
                                            type: array
                                            description: Список уникальных идентификаторов сайтов для которых доступен сотрудник.
                                        out_external_allowed_call_directions:
                                            type: array
                                            description: Какие направления вызовов разрешены сотруднику для исходящих внешних звонков in - входящие вызовы out - исходящие вызовы
                                        out_internal_allowed_call_directions:
                                            type: array
                                            description: Какие направления вызовов разрешены сотруднику для исходящих внутренних звонков in - входящие вызовы out - исходящие вызовы
                                        patronymic:
                                            type: string
                                            description: Отчество сотрудника
                                            example: example_string
                                        phone_id:
                                            type: number
                                            description: 'Уникальный идентификатор телефона сотрудника из "get.employees#phone_id" Указываем в случаи если хотим изменить существующий номер. Если не указываем, то поиск производится по номеру телефона (phone_number):'
                                            example: 123
                                        phone_number:
                                            type: string
                                            description: 'Номер телефона сотрудника Логика обновления: - телефона уже привязан к этому сотруднику - обновляем параметры - телефона не привязан к этому сотруднику - добавляем его - телефона нет в аккаунте - создаем новый и привязываем к сотруднику'
                                            example: example_string
                                        phone_numbers:
                                            type: array
                                            description: Список телефонов сотрудника Важно понимать, что при создании нового сотрудника номер уже может существовать у другого сотрудника и если номеру переданы новые параметры, то они будут так же обновлены уже существующему номеру.
                                        schedule_id:
                                            type: number
                                            description: График активности
                                            example: 123
                                        status:
                                            type: string
                                            description: Статус номера.
                                            example: active
                                            enum:
                                                - active
                                                - inactive
                                        status_id:
                                            type: number
                                            description: Уникальный идентификатор статуса. Для получения полного списка статусов необходимо использовать метод "get.statuses"
                                            example: 123
                                        user_id:
                                            type: number
                                            description: Уникальный идентификатор пользователя клиента агента от имени которого делается запрос Является обязательным для агента Для получения списка пользователей клиента необходимо использовать метод "get.customer_users"
                                            example: 123
                                    required:
                                        - extension_queue_enabled
                                        - id
                                        - extension_phone_number
                                        - phone_numbers
                                        - access_token
                                        - extension_voice_mail_enabled
                                        - last_name
                                        - phone_number
                                        - operator_login
                                        - operator_password
                            required:
                                - jsonrpc
                                - id
                                - method
                                - params
            responses:
                "200":
                    description: Successful response
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    id:
                                        type: number
                                        description: Request identifier
                                    jsonrpc:
                                        type: string
                                        description: JSON-RPC version
                                        example: "2.0"
                                    result:
                                        type: object
                                        properties:
                                            data:
                                                type: object
                                            metadata:
                                                type: object
                                                description: Response metadata
                                        required:
                                            - data
                                            - metadata
                                required:
                                    - jsonrpc
                                    - id
                                    - result
                "400":
                    description: Error response
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    error:
                                        type: object
                                        properties:
                                            code:
                                                type: number
                                            data:
                                                type: object
                                            message:
                                                type: string
                                    id:
                                        type: number
                                    jsonrpc:
                                        type: string
            tags:
                - novofon
